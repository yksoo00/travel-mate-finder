<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">

  <!-- 1) ë°˜ë“œì‹œ head ìµœìƒë‹¨ì—ì„œ, defer ì—†ì´ -->


  <title th:text="${pageTitle != null} ? ${pageTitle} : 'OUIGO'">OUIGO</title>

  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/navbar.css}">
  <link rel="stylesheet" th:href="@{/css/recruit.css}">
  <link rel="stylesheet" th:href="@{/css/recruit-detail.css}">
  <link rel="stylesheet" th:href="@{/css/recruit-create.css}">
  <link rel="stylesheet" th:href="@{/css/recruit-update.css}">
  <link rel="stylesheet" th:href="@{/css/touristDetail.css}">
</head>

<body>

<!-- 1) ðŸ“Œ Kakao SDK ë¨¼ì € ë¡œë“œ (ì ˆëŒ€ defer ê¸ˆì§€) -->
<script
    src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8b23243ecce1d67f7d49784724586afa&libraries=services"></script>

<div th:replace="~{navbar :: navbar}"></div>
<script th:src="@{/js/navbar.js}" defer></script>
<script th:src="@{/js/api.js}" defer></script>

<!-- 2) ðŸ“Œ map-core.jsëŠ” ê°€ìž¥ ë¨¼ì € ì‹¤í–‰ (defer ê¸ˆì§€) -->

<div class="main-layout">
  <div class="map-container">
    <h2 class="section-title">ì¹´ì¹´ì˜¤ ë§µ</h2>
    <div id="map"></div>
  </div>

  <div class="content-container">
    <div th:replace="~{${pageFragment} :: recruitContent}"></div>
  </div>
</div>

<!-- ëª©ë¡ íŽ˜ì´ì§€ (defer OK) -->
<script th:src="@{/js/map.js}" defer></script>
<script th:if="${pageName == 'list'}" th:src="@{/js/markerManager-recruit.js}"
        defer></script>
<script th:if="${pageName == 'list'}" th:src="@{/js/recruit-list.js}" defer></script>

<!-- ìƒì„¸ íŽ˜ì´ì§€ (defer OK) -->
<script th:if="${pageName == 'detail'}" th:src="@{/js/recruit-detail.js}" defer></script>
<script th:if="${pageName == 'touristDetail'}" th:src="@{/js/touristDetail.js}" defer></script>

<!-- ìƒì„±/ìˆ˜ì • íŽ˜ì´ì§€ -->
<!-- 3) ðŸ“Œ map-marker-select.jsëŠ” ë°”ë¡œ ë’¤ì—ì„œ ì‹¤í–‰ (defer ê¸ˆì§€) -->
<script th:if="${pageName == 'create' || pageName == 'update'||pageName=='touristDetail'}"
        th:src="@{/js/map-marker-select.js}"></script>

<!-- ê·¸ ë‹¤ìŒ ìƒì„±/ìˆ˜ì • JS (defer OK) -->
<script th:if="${pageName == 'create'}" th:src="@{/js/recruit-create.js}" defer></script>
<script th:if="${pageName == 'update'}" th:src="@{/js/recruit-update.js}" defer></script>

</body>
</html>